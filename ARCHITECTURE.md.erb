# Architecture

```
<%=
    %x(
        graph-easy --as boxart <<________EOF
            digraph {

            graph [rankdir=TB];

            kak_set  [label="kak client #1\\n...\\nkak client #n"]
            runner   [label="lib/runner.sh"]
            reporter [label="lib/reporter.rb"]

            "bin/kak-spec" -> runner [label=executes]

            runner -> reporter [label="launches and\\nwaits for"]
            runner -> kak_set [label="launches one\\nper spec file"]

            reporter -> kak_set [label="eventually\\ncommands each to\\nquit via kak -p"]
            reporter -> "/dev/stdout" [label="prints to"]

            kak_set -> reporter [label="each informs\\nvia a separate\\nFIFO"]
            kak_set -> "lib/kak-spec.kak-no-autoload" [label="each loads"]

           }
________EOF
    )
-%>
```

## Directory Organization

```
.
├── bin                      -- executables
├── doc                      -- `make doc` will populate this with source code documentation
├── example                  -- a collection of specs, many of which fail for illustration
├── lib                      -- **the heavy lifting happens here**
├── man                      -- man page source
├── rc                       -- optional kakoune configuration and documentation
├── script                   -- helper scripts for development
├── share
│   ├── kak-spec
│   │   └── lib -> ../../lib -- a symbolic link trick to help bin/kak-spec find what it needs
│   └── man
│       └── man1             -- manual pages generated by the makefile
└── spec                     -- a collection of specs that should generally pass
```
